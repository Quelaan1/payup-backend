CREATE TABLE "Users" (
  "UserID" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "PhoneNumber" VARCHAR(15) UNIQUE NOT NULL,
  "Email" VARCHAR(100) UNIQUE NOT NULL,
  "PinHash" CHAR(64) NOT NULL
);

CREATE TABLE "PendingUsers" (
    "PendingUserID" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    "PhoneNumber" VARCHAR(15) UNIQUE NOT NULL,
    "OTP" VARCHAR(6) NOT NULL,
    "OTPCreatedAt" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    "AdditionalInfo" VARCHAR(255)
);

CREATE TABLE "Profiles" (
  "ProfileID" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "UserID" integer,
  "Name" VARCHAR(100) NOT NULL,
  "GST" VARCHAR(15),
  "PAN" VARCHAR(10)
);

ALTER TABLE "Profiles" ADD FOREIGN KEY ("UserID") REFERENCES "Users" ("UserID");
